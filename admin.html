<!doctype html> <html lang="en"> <head> <meta charset="utf-8"/> <meta name="viewport" content="width=device-width,initial-scale=1"/> <title>Kore Mobiles ‚Äî Admin Dashboard</title> <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap" rel="stylesheet"/> <style> :root { --blue:#007bff; --green:#28a745; --red:#dc3545; --bg:#f7f9fc; } body { font-family:'Poppins',sans-serif; margin:0; background:var(--bg); color:#111; } /* LOGIN BOX */ #loginBox { max-width:360px; margin:80px auto; background:#fff; padding:25px; border-radius:14px; box-shadow:0 8px 25px rgba(0,0,0,0.15); text-align:center; } #loginBox h2 { margin-bottom:15px; color:var(--blue); } #loginBox input { width:100%; padding:10px; margin:8px 0; border:1px solid #ccc; border-radius:8px; } #loginBox button { width:100%; padding:10px; background:var(--blue); border:none; color:#fff; font-weight:600; border-radius:8px; cursor:pointer; } /* ADMIN DASHBOARD (YOUR ORIGINAL DESIGN) */ #adminSection { display:none; } .wrap{max-width:1000px;margin:18px auto;padding:14px} .header{display:flex;align-items:center;justify-content:space-between;gap:12px;margin-bottom:14px} h2{color:var(--blue);margin:0;font-size:1.4rem} .btn{padding:10px 14px;border-radius:8px;border:none;cursor:pointer;font-weight:600} .primary{background:var(--blue);color:#fff} .logout{background:var(--red);color:#fff} .layout{display:grid;grid-template-columns:1fr 420px;gap:14px} .panel{background:#fff;border-radius:12px;padding:12px;box-shadow:0 12px 30px rgba(0,0,0,0.06)} .table{width:100%;border-collapse:collapse;margin-top:8px} .table th,.table td{padding:8px;border-bottom:1px solid #eee;text-align:left;font-size:.95rem;vertical-align:middle} .actions button{margin-right:6px;padding:6px 10px;border-radius:8px;border:none;cursor:pointer} .edit{background:#ffc107;color:#111} .del{background:#dc3545;color:#fff} .add{background:var(--green);color:#fff} .note{font-size:.9rem;color:#666;margin-top:8px} @media(max-width:900px){.layout{grid-template-columns:1fr}} input,select{width:100%;padding:8px;border:1px solid #ddd;border-radius:8px;margin-top:4px} </style> </head> <body> <!-- LOGIN SCREEN --> <div id="loginBox"> <h2>Admin Login</h2> <input id="loginEmail" type="email" placeholder="Enter email"> <input id="loginPass" type="password" placeholder="Enter password"> <button onclick="adminLogin()">Login</button> </div> <!-- ADMIN DASHBOARD --> <div id="adminSection"> <div class="wrap"> <div class="header"> <h2>‚öôÔ∏è Admin Dashboard</h2> <div style="display:flex;gap:8px"> <button class="btn primary" onclick="showPanel('modelsPanel')">üì± Models</button> <button class="btn primary" onclick="showPanel('usersPanel')">üë§ Users</button> <button class="btn logout" onclick="adminLogout()">Logout</button> </div> </div> <!-- MODELS --> <div id="modelsPanel" class="layout"> <div class="panel"> <h3>Models</h3> <table class="table"> <thead> <tr> <th>Model</th><th>MOP</th><th>DP</th><th>Pre-GST DP</th> <th>Sellout</th><th>Sellin</th><th>No Cost EMI</th> <th>Full Swipe</th><th>UPI Cashback</th> <th>Eligible Banks</th><th>Features</th> <th>Upgrade</th><th>Finance Upgrade</th><th>Actions</th> </tr> </thead> <tbody id="modelsTbody"></tbody> </table> <p class="note">Data is saved to Firestore collection <code>mobileModels</code>.</p> </div> <div class="panel"> <h3>Add / Edit Model</h3> <button class="btn primary" onclick="clearModelForm()">‚ûï New Model</button> <label>Model Name</label><input id="m_name"/> <label>MOP (‚Çπ)</label><input id="m_mop" type="number"/> <label>DP (‚Çπ)</label><input id="m_dp" type="number" oninput="calcPreGst()"/> <label>Pre-GST DP (auto)</label><input id="m_preGst" readonly/> <label>Sellout (‚Çπ)</label><input id="m_sellout" type="number"/> <label>Sellin (‚Çπ)</label><input id="m_sellin" type="number"/> <label>No Cost EMI (‚Çπ)</label><input id="m_noCostEmi" type="number"/> <label>Full Swipe (‚Çπ)</label><input id="m_fullSwipe" type="number"/> <label>UPI Cashback (‚Çπ)</label><input id="m_upiCashback" type="number"/> <label>Eligible Banks</label><input id="m_eligibleBanks"/> <label>Features</label><input id="m_features"/> <label>Upgrade (‚Çπ)</label><input id="m_upgrade" type="number"/> <label>Finance Upgrade (‚Çπ)</label><input id="m_upgradeFinance" type="number"/> <button class="btn add" onclick="saveModel()">Save Model</button> </div> </div> <!-- USERS --> <div id="usersPanel" class="layout" style="display:none"> <div class="panel"> <h3>Users</h3> <table class="table"> <thead><tr><th>Email</th><th>Name</th><th>Actions</th></tr></thead> <tbody id="usersTbody"></tbody> </table> </div> <div class="panel"> <h3>Add / Edit User</h3> <label>User Name</label><input id="u_name"/> <label>Email</label><input id="u_email" type="email"/> <label>Password</label><input id="u_pass" type="password"/> <button class="btn add" onclick="saveUser()">Save User</button> </div> </div> </div> </div> <script type="module"> /* FIREBASE SETUP */ import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js"; import { getFirestore, collection, addDoc, getDocs, doc, updateDoc, deleteDoc } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js"; import { getAuth, signInWithEmailAndPassword, createUserWithEmailAndPassword, signOut, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js"; const firebaseConfig = { apiKey: "AIzaSyByEiFSbsDlrCtVJjZgvbCoYPt_io2CpTk", authDomain: "nlcalulator.firebaseapp.com", projectId: "nlcalulator", storageBucket: "nlcalulator.firebasestorage.app", messagingSenderId: "783940164431", appId: "1:783940164431:web:edd9e24a8e6901942b433a", measurementId: "G-D8CXJYMPG0" }; const app = initializeApp(firebaseConfig); const db = getFirestore(app); const auth = getAuth(app); /* ADMIN CREDENTIAL */ const ADMIN_EMAIL = "anvirambhiya@gmail.com"; /* LOGIN FUNCTION */ window.adminLogin = function () { let email = loginEmail.value.trim(); let pass = loginPass.value.trim(); signInWithEmailAndPassword(auth, email, pass) .then(() => { if (email === ADMIN_EMAIL) { // Show admin section loginBox.style.display = "none"; adminSection.style.display = "block"; loadModels(); } else { alert("‚ùå You are not an admin"); signOut(auth); } }) .catch(err => alert(err.message)); }; /* LOGOUT */ window.adminLogout = function () { signOut(auth); adminSection.style.display = "none"; loginBox.style.display = "block"; }; /* AUTO CHECK ON PAGE LOAD */ onAuthStateChanged(auth, user => { if (user && user.email === ADMIN_EMAIL) { loginBox.style.display = "none"; adminSection.style.display = "block"; loadModels(); } else { loginBox.style.display = "block"; adminSection.style.display = "none"; } }); /* THE REST IS YOUR ORIGINAL FULL CODE BELOW ‚Äî UNTOUCHED */ /* -------------------------------------------- */ /* MODELS, USERS, FORMS ‚Äî SAME AS YOUR ORIGINAL */ /* -------------------------------------------- */ let editModelId = null; async function loadModels() { const tbody = document.getElementById('modelsTbody'); tbody.innerHTML = '<tr><td colspan="10">Loading...</td></tr>'; const snap = await getDocs(collection(db,'mobileModels')); tbody.innerHTML = ''; snap.forEach(docSnap => { const m = docSnap.data(); const id = docSnap.id; const row = <tr> <td>${m.name||''}</td> <td>‚Çπ${m.mop||0}</td> <td>‚Çπ${m.dp||0}</td> <td>‚Çπ${m.preGstDp||0}</td> <td>‚Çπ${m.sellout||0}</td> <td>‚Çπ${m.sellin||0}</td> <td>‚Çπ${m.noCostEmi||0}</td> <td>‚Çπ${m.fullSwipe||0}</td> <td>‚Çπ${m.upiCashback||0}</td> <td>${(m.eligibleBanks||[]).join(', ')}</td> <td>${m.features||''}</td> <td>‚Çπ${m.upgrade||0}</td> <td>‚Çπ${m.upgradeFinance||0}</td> <td> <button class='edit' onclick="startEditModel('${id}','${m.name}',${m.mop},${m.dp},${m.sellout},${m.sellin},${m.noCostEmi||0},${m.fullSwipe||0},${m.upiCashback||0},'${(m.eligibleBanks||[]).join(', ')}','${m.features||''}',${m.upgrade||0},${m.upgradeFinance||0})">Edit</button> <button class='del' onclick="deleteModel('${id}')">Delete</button> </td> </tr>; tbody.insertAdjacentHTML('beforeend', row); }); } window.loadModels = loadModels; window.saveModel = async function(){ const name=m_name.value.trim(); const mop=Number(m_mop.value)||0; const dp=Number(m_dp.value)||0; const preGstDp=dp?Number((dp/1.18).toFixed(2)):0; const sellout=Number(m_sellout.value)||0; const sellin=Number(m_sellin.value)||0; const noCostEmi=Number(m_noCostEmi.value)||0; const fullSwipe=Number(m_fullSwipe.value)||0; const upiCashback=Number(m_upiCashback.value)||0; const eligibleBanks=m_eligibleBanks.value.trim()?m_eligibleBanks.value.split(',').map(b=>b.trim()):[]; const features=m_features.value.trim(); const upgrade=Number(m_upgrade.value)||0; const upgradeFinance=Number(m_upgradeFinance.value)||0; const payload={name,mop,dp,preGstDp,sellout,sellin,noCostEmi,fullSwipe,upiCashback,eligibleBanks,features,upgrade,upgradeFinance,updatedAt:new Date()}; if(editModelId){ await updateDoc(doc(db,'mobileModels',editModelId),payload); alert('Model updated'); } else { await addDoc(collection(db,'mobileModels'),payload); alert('Model added'); } clearModelForm(); loadModels(); }; window.startEditModel=function(id,name,mop,dp,sellout,sellin,noCostEmi,fullSwipe,upiCashback,banks,features='',upgrade=0,upgradeFinance=0){ editModelId=id; m_name.value=name; m_mop.value=mop; m_dp.value=dp; m_sellout.value=sellout; m_sellin.value=sellin; m_noCostEmi.value=noCostEmi; m_fullSwipe.value=fullSwipe; m_upiCashback.value=upiCashback; m_eligibleBanks.value=banks; m_features.value=features; m_upgrade.value=upgrade; m_upgradeFinance.value=upgradeFinance; calcPreGst(); }; window.deleteModel=async function(id){ if(confirm('Delete this model?')){ await deleteDoc(doc(db,'mobileModels',id)); loadModels(); } }; window.clearModelForm=()=>{ editModelId=null; [ m_name,m_mop,m_dp,m_sellout,m_sellin,m_preGst,m_noCostEmi, m_fullSwipe,m_upiCashback,m_eligibleBanks,m_features, m_upgrade,m_upgradeFinance ].forEach(el=>el.value=''); }; window.calcPreGst=()=>{const dp=Number(m_dp.value)||0;m_preGst.value=dp?(dp/1.18).toFixed(2):'';}; /* USERS */ async function loadUsers(){ const tbody=document.getElementById('usersTbody'); tbody.innerHTML='<tr><td colspan="3">Loading...</td></tr>'; const snap=await getDocs(collection(db,'users')); tbody.innerHTML=''; snap.forEach(docSnap=>{ const u=docSnap.data(); const id=docSnap.id; const row=<tr> <td>${u.email}</td> <td>${u.name}</td> <td><button class='del' onclick="deleteUser('${id}')">Delete</button></td> </tr>; tbody.insertAdjacentHTML('beforeend',row); }); } window.loadUsers=loadUsers; window.saveUser=async function(){ const name=u_name.value.trim(), email=u_email.value.trim(), pass=u_pass.value.trim(); if(!name||!email||!pass) return alert('Fill all fields'); try { const cred = await createUserWithEmailAndPassword(auth,email,pass); await addDoc(collection(db,'users'),{ uid:cred.user.uid, name,email, createdAt:new Date() }); alert("User added"); loadUsers(); u_name.value=""; u_email.value=""; u_pass.value=""; } catch(e){ alert("Error: " + e.message); } }; window.deleteUser=async function(id){ if(confirm("Delete user from database?")){ await deleteDoc(doc(db,'users',id)); loadUsers(); } }; window.showPanel=function(id){ document.getElementById('modelsPanel').style.display='none'; document.getElementById('usersPanel').style.display='none'; document.getElementById(id).style.display='grid'; if(id==='modelsPanel') loadModels(); if(id==='usersPanel') loadUsers(); }; </script> </body> </html>
